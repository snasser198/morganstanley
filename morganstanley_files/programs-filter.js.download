/*! morgan-stanley-redesign 19-07-2017 */
!function(a){"use strict";var b,c,d,e,f,g="all",h="all",i="all",j="all",k="all",l="all",m=0,n=0,o=0,p=(window.location.href,window.location.pathname.replace(".html","").replace(/\/$/,"")),q="all",r={"institutional-securities":{href:"programs/institutional-securities",text:"Institutional Securities"},"sales-and-trading":{href:"programs/institutional-securities/sales-and-trading",text:"Sales and Trading"},"bank-resource-management":{href:"programs/institutional-securities/bank-resource-management",text:"Bank Resource Management"},commodities:{href:"programs/institutional-securities/commodities",text:"Commodities"},"equity-research":{href:"programs/institutional-securities/equity-research",text:"Equity Research"},"global-capital-markets":{href:"programs/institutional-securities/global-capital-markets",text:"Global Capital Markets"},"institutional-equity-and-prime-brokerage":{href:"programs/institutional-securities/institutional-equity-and-prime-brokerage",text:"Institutional Equity and Prime Brokerage"},"investment-banking":{href:"programs/institutional-securities/investment-banking",text:"Investment Banking"},"fixed-income":{href:"programs/institutional-securities/fixed-income",text:"Fixed Income"},"fund-services":{href:"programs/institutional-securities/fund-services",text:"Fund Services"},"public-finance":{href:"programs/institutional-securities/public-finance",text:"Public Finance"},"quantitative-finance":{href:"programs/institutional-securities/quantitative-finance",text:"Quantitative Finance"},"investment-management":{href:"programs/investment-management",text:"Investment Management"},"wealth-management":{href:"programs/wealth-management",text:"Wealth Management"},"company-management":{href:"programs/company-management",text:"Company Management"},"human-resources":{href:"programs/company-management/human-resources",text:"Human Resources"},"credit-risk":{href:"programs/company-management/credit-risk",text:"Credit Risk"},"corporate-treasury":{href:"programs/company-management/corporate-treasury",text:"Corporate Treasury"},compliance:{href:"programs/company-management/compliance",text:"Compliance"},"firm-strategy-and-execution":{href:"programs/company-management/firm-strategy-and-execution",text:"Firm Strategy and Execution"},finance:{href:"programs/company-management/finance",text:"Finance"},"internal-audit":{href:"programs/company-management/internal-audit",text:"Internal Audit"},"market-risk":{href:"programs/company-management/market-risk",text:"Market Risk"},"operational-risk":{href:"programs/company-management/operational-risk",text:"Operational Risk"},operations:{href:"programs/operations",text:"Operations"},technology:{href:"programs/technology",text:"Technology"}};a(function(){if(a("div.program-filter").length>0||a("div.programdetail").length>0)if(a(".tab-nav-button > a").css("color","#808080"),a(".program-finder-results-content.inner").css("display","none"),sessionStorage.advanceSearch)t();else if(sessionStorage.recuritmentRegion)u();else if(a("div.insubDivisonPage").length>0&&sessionStorage.result&&(!sessionStorage.divClicked||"All"===sessionStorage.getItem("divClicked"))){var k=sessionStorage.getItem("result"),l=new Array,m="";l=k.split("_"),a.each(l,function(a,f){b=r[f],e=F(b.href)+".html",c='data-analytics="results-choice-'+(a+1)+'"',d="program-finder-result",m+='<li class="'+d+'">',m+='<a href="'+e+'" '+c+">"+b.text+"</a>",m+="</li>"}),a("#program-finder-results").find("ul").html(m),a(".program-finder-results-content.inner").css("display","block"),a(".program-finder-result").first().addClass("current"),sessionStorage.liClicked&&a(".program-finder-result > a").each(function(){var b=a(this).text().replace(/^\s+|\s+$/g,""),c=sessionStorage.getItem("liClicked");b==c&&(a(this).parent().siblings().removeClass("current"),a(this).parent().addClass("current"))});var z=p.split("/"),A=z[z.length-1];f=z[z.length-2];var B=f.replace("-"," ");B=B.toLowerCase().replace(/\b[a-z]/g,function(a){return a.toUpperCase()}),a(".subdivision-select-label").css("display","block"),a(".program-division-name").html(B),"programs"==f&&(f=A),a("div.tab-nav-button > a").each(function(){var b=a(this).text().replace(/^\s+|\s+$/g,""),c=b.replace(/\s+/g,"-").toLowerCase();c==f&&(a(this).css("color"," "),a(this).parent().addClass("page-active"))}),a(".hero-prog-listings").find(".subdivision-content").addClass("hidden"),a(".hero-prog-listings").find('.subdivision-content[data-subdivision="'+A+'"]').removeClass("hidden"),a("select[name='selectSubdivision']").val(A),!(sessionStorage.region||sessionStorage.city||sessionStorage.tenure||sessionStorage.education)||"undefined"==sessionStorage.getItem("region")&&"undefined"==sessionStorage.getItem("city")&&"undefined"==sessionStorage.getItem("tenure")&&"undefined"==sessionStorage.getItem("education")?(sessionStorage.setItem("region","all"),sessionStorage.setItem("city","all"),sessionStorage.setItem("tenure","all"),sessionStorage.setItem("education","all"),g=sessionStorage.getItem("region"),h=sessionStorage.getItem("city"),i=sessionStorage.getItem("tenure"),j=sessionStorage.getItem("education")):(g=sessionStorage.getItem("region"),h=sessionStorage.getItem("city"),i=sessionStorage.getItem("tenure"),j=sessionStorage.getItem("education"));var C=p+".dynadata_program-results.json?filter=&region="+g+"&city="+h+"&tenure="+i+"&educationLevel="+j;a.ajax({url:C,dataType:"json",success:y,error:w}),sessionStorage.removeItem("divClicked"),s()}else if(a("div.insubDivisonPage").length>0&&sessionStorage.divClicked){f=sessionStorage.getItem("divClicked"),a("div.tab-nav-button > a").each(function(){var b=a(this).text().replace(/^\s+|\s+$/g,"");b==f&&(a(this).css("color"," "),a(this).parent().addClass("page-active"))}),!(sessionStorage.region||sessionStorage.city||sessionStorage.tenure||sessionStorage.education)||"undefined"==sessionStorage.getItem("region")&&"undefined"==sessionStorage.getItem("city")&&"undefined"==sessionStorage.getItem("tenure")&&"undefined"==sessionStorage.getItem("education")?(sessionStorage.setItem("region","all"),sessionStorage.setItem("city","all"),sessionStorage.setItem("tenure","all"),sessionStorage.setItem("education","all"),g=sessionStorage.getItem("region"),h=sessionStorage.getItem("city"),i=sessionStorage.getItem("tenure"),j=sessionStorage.getItem("education")):(g=sessionStorage.getItem("region"),h=sessionStorage.getItem("city"),i=sessionStorage.getItem("tenure"),j=sessionStorage.getItem("education")),f=sessionStorage.getItem("divClicked");var C=p+".dynadata_program-results.json?filter=&region="+g+"&city="+h+"&tenure="+i+"&educationLevel="+j;a.ajax({url:C,dataType:"json",success:y,error:w}),s()}else if(sessionStorage.allSelected&&window.location.href.indexOf("programs.html")>-1&&sessionStorage.divClicked){a(this).css("color",""),a("div.tab-nav-button").first().addClass("page-active"),g=sessionStorage.getItem("region"),h=sessionStorage.getItem("city"),i=sessionStorage.getItem("tenure"),j=sessionStorage.getItem("education"),f=sessionStorage.getItem("divClicked");var C=p+".dynadata_program-results.json?filter=&region="+g+"&city="+h+"&tenure="+i+"&educationLevel="+j;a.ajax({url:C,dataType:"json",success:y,error:w}),s()}else{var z=p.split("/"),D=z[z.length-1];if("programs"!=D){var E=z.indexOf("programs")+1,G=z[E],A=z[E+1];a("div.tab-nav-button > a").each(function(){var b=a(this).text().replace(/^\s+|\s+$/g,""),c=b.replace(/\s+/g,"-").toLowerCase();c==G&&(a(this).css("color",""),a(this).parent().addClass("page-active"))})}else a(this).css("color",""),a("div.tab-nav-button").first().addClass("page-active");a("label.subdivision-select-label").length>0&&"programs"!=D&&"undefined"!=typeof A&&(a(".hero-prog-listings").find(".subdivision-content").addClass("hidden"),a(".hero-prog-listings").find('.subdivision-content[data-subdivision="'+A+'"]').removeClass("hidden"),a("select[name='selectSubdivision']").val(A)),!(sessionStorage.region||sessionStorage.city||sessionStorage.tenure||sessionStorage.education)||"undefined"==sessionStorage.getItem("region")&&"undefined"==sessionStorage.getItem("city")&&"undefined"==sessionStorage.getItem("tenure")&&"undefined"==sessionStorage.getItem("education")?(sessionStorage.setItem("region","all"),sessionStorage.setItem("city","all"),sessionStorage.setItem("tenure","all"),sessionStorage.setItem("education","all"),g=sessionStorage.getItem("region"),h=sessionStorage.getItem("city"),i=sessionStorage.getItem("tenure"),j=sessionStorage.getItem("education")):(sessionStorage.setItem("hasValue","value"),g=sessionStorage.getItem("region"),h=sessionStorage.getItem("city"),i=sessionStorage.getItem("tenure"),j=sessionStorage.getItem("education"));var C=p+".dynadata_program-results.json?filter=&region="+g+"&city="+h+"&tenure="+i+"&educationLevel="+j;a.ajax({url:C,dataType:"json",success:y,error:w}),s()}a('select[name="selectRegion"],#city-filters div.custom-select-wrap ,select[name="selectTenure"],select[name="selectEducation"]').change(function(){var b=a(this).text();b.indexOf("Cities")>=0?n=1:b.indexOf("Region")>=0&&(o=1,a("div.insubDivisonPage").length>0&&sessionStorage.setItem("flagSelected","1"),n=0,sessionStorage.removeItem("allSelected"),h="all"),q=a("form.form-subdivision-select").length>0?a("select[name='selectSubdivision']").val():"all",g=a("select[name='selectRegion']").val(),h=sessionStorage.hasValue&&1!==n?"all":a("select[name='selectCity']").val(),1===o&&"all"!==h&&1!==n&&(h="all"),i=a("select[name='selectTenure']").val(),j=a("select[name='selectEducation']").val(),sessionStorage.setItem("region",g),sessionStorage.setItem("city",h),sessionStorage.setItem("tenure",i),sessionStorage.setItem("education",j),v(p,q,g,h,i,j)}),sessionStorage.setItem("flagSelected","0"),a('select[name="selectSubdivision"]').change(function(){if(q=a("select[name='selectSubdivision']").val(),p=window.location.pathname.replace(".html","").replace(/\/$/,""),sessionStorage.result)if("all"!=q){var b=p.split("/"),c=b[b.length-1];p=p.replace(c,q)}else{p=window.location.pathname.replace(".html","").replace(/\/$/,"");var d=p.split("/");d.pop(),p=d.join("/")}else if(sessionStorage.divClicked)if("all"!=q){var e=window.location.pathname.replace(".html","").replace(/\/$/,"");p=e+"/"+q}else p=window.location.pathname.replace(".html","").replace(/\/$/,"");else if("all"!=q){var b=p.split("/"),f=b.indexOf("programs")+1,k=b[f+1];if("undefined"!=typeof k){var b=p.split("/"),c=b[b.length-1];p=p.replace(c,q)}else{var e=window.location.pathname.replace(".html","").replace(/\/$/,"");p=e+"/"+q}}else{p=window.location.pathname.replace(".html","").replace(/\/$/,"");var d=p.split("/");d.pop(),p=d.join("/")}g=a("select[name='selectRegion']").val(),h=a("select[name='selectCity']").val(),i=a("select[name='selectTenure']").val(),j=a("select[name='selectEducation']").val(),console.log("selectedSubDivision"+q),a(".hero-prog-listings").find(".subdivision-content").addClass("hidden"),a(".hero-prog-listings").find('.subdivision-content[data-subdivision="'+q+'"]').removeClass("hidden"),v(p,q,g,h,i,j)}),a("div.program-finder-results-content li").click(function(){a(this).first().removeClass("current");var b=a(this).first().text();sessionStorage.setItem("liClicked",b)}),sessionStorage.removeItem("liClicked"),a("div.tab-nav-button").click(function(){sessionStorage.removeItem("result");var b=a(this).text().replace(/^\s+|\s+$/g,"");a(this).first().removeClass("page-active");var c=window.location.pathname.replace(/\/$/,"");g=a("select[name='selectRegion']").val(),h=a("select[name='selectCity']").val(),i=a("select[name='selectTenure']").val(),j=a("select[name='selectEducation']").val(),sessionStorage.setItem("region",g),sessionStorage.setItem("city",h),sessionStorage.setItem("tenure",i),sessionStorage.setItem("education",j),sessionStorage.setItem("divClicked",b);var d=c+"/"+b+".dynadata_program-results.json?filter=&region="+g+"&city="+h+"&tenure="+i+"&educationLevel="+j;a.ajax({url:d,dataType:"json",success:x,error:w}),"All"==b&&a("div.insubDivisonPage").length>0&&(sessionStorage.setItem("allSelected","1"),sessionStorage.setItem("flagSelected","1"))})});var s=function(){sessionStorage.getItem("region"),sessionStorage.getItem("city"),sessionStorage.getItem("tenure"),sessionStorage.getItem("education");!(sessionStorage.region||sessionStorage.city||sessionStorage.tenure||sessionStorage.education)||"undefined"==sessionStorage.getItem("region")&&"undefined"==sessionStorage.getItem("city")&&"undefined"==sessionStorage.getItem("tenure")&&"undefined"==sessionStorage.getItem("education")?(sessionStorage.setItem("region","all"),sessionStorage.setItem("city","all"),sessionStorage.setItem("tenure","all"),sessionStorage.setItem("education","all"),a("select[name='selectRegion']").val(sessionStorage.getItem("region")),a("select[name='selectCity']").val(sessionStorage.getItem("city")),a("select[name='selectTenure']").val(sessionStorage.getItem("tenure")),a("select[name='selectEducation']").val(sessionStorage.getItem("education"))):(a("select[name='selectRegion']").val(sessionStorage.getItem("region")),a("select[name='selectCity']").val(sessionStorage.getItem("city")),a("select[name='selectTenure']").val(sessionStorage.getItem("tenure")),a("select[name='selectEducation']").val(sessionStorage.getItem("education")))},t=function(){sessionStorage.removeItem("advanceSearch"),a("div.tab-nav-button").first().addClass("page-active"),q="all",k=sessionStorage.getItem("jobFinderRegionSelect"),l=sessionStorage.getItem("jobFinderEducationSelect"),sessionStorage.setItem("region",k),sessionStorage.setItem("city","all"),sessionStorage.setItem("tenure","all"),sessionStorage.setItem("education",l),a("select[name='selectRegion']").val(k),a("select[name='selectEducation']").val(l),v(p,q,k,h,i,l)},u=function(){sessionStorage.removeItem("recuritmentRegion"),a("div.tab-nav-button").first().addClass("page-active"),q="all";var b=sessionStorage.getItem("recuritmentRegionValue");sessionStorage.setItem("region",b),sessionStorage.setItem("city","all"),sessionStorage.setItem("tenure","all"),sessionStorage.setItem("education","all"),a("select[name='selectRegion']").val(b),v(p,q,b,h,i,j)},v=function(b,c,d,e,f,g){if("all"!=c&&sessionStorage.results)var h=b+"/"+c+".dynadata_program-results.json?filter=&region="+d+"&city="+e+"&tenure="+f+"&educationLevel="+g;else var h=b+".dynadata_program-results.json?filter=&region="+d+"&city="+e+"&tenure="+f+"&educationLevel="+g;a.ajax({url:h,dataType:"json",success:x,error:w})},w=function(b){a(".page-block -white program-tiles").html(b.responseText)},x=function(b,c,d){if(1!=n)if(0==b.options.length){a("#city-filters div.custom-select-wrap").empty();var e="";e+="<label for='selectCity'>Cities</label>",e+="<select name='selectCity' id='selectCity' data-region='north-america' data-analytics='filter-programs-city' data-filter-key='city'>",e+="<option value='all' selected='selected'>City</option>",e+="</select>",E(e,d)}else z(b,c,d);var c=1;1==n&&0!=b.regionOption.length&&(z(b,c,d),a("select[name='selectRegion']").val(b.regionOption[0].value),sessionStorage.setItem("region",b.regionOption[0].value),a("select[name='selectCity']").val(sessionStorage.getItem("city"))),0==b.programs.programs.length?(a(".program-tiles").empty(),a(".no-program-results-content").addClass("no-program-results")):A(b,c)},y=function(b,c){var c=1;if(0==b.options.length){a(".citySelect").empty();var d="";d+="<label for='selectCity'>Cities</label>",d+="<select name='selectCity' id='selectCity' data-region='north-america' data-analytics='filter-programs-city' data-filter-key='city'>",d+="<option value='all' selected='selected'>City</option>",d+="</select>",E(d,m)}else z(b,c);0==b.programs.programs.length?(a(".program-tiles").empty(),a(".no-program-results-content").addClass("no-program-results")):A(b,c)},z=function(a,b,c){var d="";d+="<label for='selectCity'>Cities</label>",d+="<select name='selectCity' id='selectCity' data-region='north-america' data-analytics='filter-programs-city' data-filter-key='city'>",d+="<option value='all' selected='selected'>City</option>";for(var e=0;e<a.options.length;e++)d+="<option value='"+a.options[e].value+"'>"+a.options[e].text+"</option>";d+="</select>",E(d,c)},A=function(a,b){var c="";c+=C(a,b),G(c)},B=function(a,b){for(var c="",d=0;b>=d;d++){for(var e=0;e<a.programs.programs[b].cities.length;e++)c+="<li>"+a.programs.programs[b].cities[e]+"</li>";return c}},C=function(a,b){var c="",b=b;c+="<section class='module tiles-module' id='program-grid'> <div class='row-base row-liquid'>";for(var d=0;d<a.programs.programs.length;d++){var e=a.programs.programs[d].topic,f=a.programs.programs[d].headline,g=JSON.stringify(a.programs.programs[d].regions).replace(/[^a-zA-Z ]/g,""),h=e.toLowerCase().replace(/ /g,"-")+"/"+f.toLowerCase().replace(/ /g,"-")+"-"+g.toLowerCase().replace(/ /g,"-"),i=a.programs.programs[d].pagePath;c+="<div class='col-one"+(d>5&&1==b?" prog-initial-hide":"")+"'><a href='"+i+"' class ='tile tile-no-image tile-program tile-program-filter' data-analytics ='tile-module-"+h+"'><div class='content-wrapper'><span class='eyebrow sng-eyebrow'>Students & Graduates Program</span><div class='main-content'><h3><span class='program-title'>"+a.programs.programs[d].topic+"</span>"+a.programs.programs[d].headline+"</h3><p>"+a.programs.programs[d].education+"<br><time>"+a.programs.programs[d].deadlineDate+"</time></p></div></div><div class='footer-wrapper'><div class='footer-content'><ul class='inline-list locations'>"+B(a,d)+"</ul></div></div></a>",c+="</div>"}return c+="</div>",a.programs.programs.length>6&&1==b&&(c+="<div class='inner load-more-btn-wrap'><a href='#' class='load-more-btn btn-capsule btn-module-footer'>Load More</a></div>"),c+="</section>"},D=function(b){b.preventDefault(),a(this).blur();for(var c=a(".prog-initial-hide"),d=0;d<c.length;d++)a(c[d]).removeClass("prog-initial-hide");c.length&&a(".inner.load-more-btn-wrap").hide()},E=function(b){a("#city-filters div.custom-select-wrap").html(b),(a("div.insubDivisonPage").length>0&&sessionStorage.divClicked&&"1"!=sessionStorage.getItem("flagSelected")||sessionStorage.allSelected||sessionStorage.result||sessionStorage.hasValue)&&"all"!=sessionStorage.getItem("region")&&"null"!=sessionStorage.getItem("city")&&0==o&&a("select[name='selectCity']").val(sessionStorage.getItem("city"))},F=function(a){for(var b=window.location.pathname.replace(".html","").replace(/\/$/,""),c=b.substring(0,b.indexOf("programs")),d=c.split("/");d.length;)d[d.length-1].length?a=d.pop()+"/"+a:d.pop();return"/"+a},G=function(b){var c=a(".program-tiles"),d=a(".programs-filter");c.html(b),d.addClass("filtered-program-results"),a(".no-program-results-content").removeClass("no-program-results"),c.find(".inner.load-more-btn-wrap").click(D)};0==window.location.href.indexOf("programs.html")&&sessionStorage.clear(),a(".nested-link").click(function(){sessionStorage.clear()}),a(".btn-retake-quiz").click(function(){sessionStorage.clear()})}(jQuery);